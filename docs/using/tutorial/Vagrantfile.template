# -*- mode: ruby -*-
# vi: set ft=ruby :

# This requires Vagrant 1.6.2 or newer (earlier versions can't reliably
# configure the Fedora 20 network stack).
Vagrant.require_version ">= 1.6.2"

# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!
VAGRANTFILE_API_VERSION = "2"

ENV['VAGRANT_DEFAULT_PROVIDER'] = 'virtualbox'

clustercrt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFgTCCA2kCEAPWNnTNQeaqbcFA5biyam0wDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTM3MDRaGA8yMDM1MDUy
MzA5MzcwNFowSTEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MRgwFgYDVQQDEw90dXRvcmlhbGNsdXN0ZXIwggIiMA0GCSqGSIb3
DQEBAQUAA4ICDwAwggIKAoICAQCzTdz15l1RCugMhugRexAs+EfLWT4FFjFw+YGs
YXqPali7YMSD7VGNNx5rAH/xtpfWE4WjRo5bc5dVzTdLgOaJOfnNPcddGNjrRo4y
MidFXFqyS4VHpOnKjuAMcTQhO19S5kxuwUTjaM1J2a8i7oTcgzUkGVWwyHgoJC9K
gy7f9SrmdELOt6voU6zgQ2CQybMCy3Pp6xO4w5tmFHsSjpR3OP2+qa14IoqiCbQC
MRT3fyayolLNsMEtk1Jq/Qyu9KkoQQL3PgpgMNU+saAC4Wuan4UZxeR6hR96kBKP
dE7NJ7G8lbRXtluBaCDF7zaaJPN+EsYOkvRtEZQjWAewaR+I1lpthXEdqb1fzfMk
hMKkA6BJOyc/pBFQTlKYGrHvCLkXkY3zLs7leoWlIKsrD7SnMaKoUg8a3XZfS94A
+Kxt9veiD+ZaSzhhDHkqX9GcrPNPzgHuEyhK6fSs0HZyKIjYOVWHn+jcG+F822zU
iRp+AOaflQNFrPo4NgY1Gm0Ma96A+SGd71mwLgEFgB9l7PDmL66NSoXGm+iyTiOt
GRIB6/Tvco5KwPCg5L8z+vSHMZkZBLxfunLqnvjwA5jbc6uMdyU3NRg4SY2oiX+H
BsiwkkoE0dOHE5co26kL5DMXBcKli6dbqnJ0sbuNCE8jwjB3xThnPKSlI7b77Wtz
a81eNQIDAQABo2YwZDASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
BjAdBgNVHQ4EFgQUFJQSKyU/JrtJQUn9YwwpPLe+ZsEwHwYDVR0jBBgwFoAUFJQS
KyU/JrtJQUn9YwwpPLe+ZsEwDQYJKoZIhvcNAQELBQADggIBAFrKuPYq6AmQ0qgb
N/Jo1TsH4sdCEuUFGJ5dI0lTk+7zf7voinlOwYLSk5P6AKZ2Xm1MdkChp190y/Qz
BAAkk5DydKK1gRQp/96wSegx4pcenaTLYWMxjbUNPrQpJQhHHEJWVRnQcVPig/at
8WoT7ID9VpTYolJ4dWoSg2R/QWslBteNR0rztOYcl9dj1ZJ4DtZlUUz1eQ4hcC6j
46OrmpedkG/DB8HT7a2d14Mbq5aPSVsIO79baC8+O4H0gaT0CRlc5exCDXxa+odK
IrAmG9ryoD+8wFEiuOnpIxzJbb943IVDKgaTAvEves6ka8xJvpXPHkgw0e4cmrlY
pIirtcP3UY2ZKyTp2Zvp64Q6KGBRw1Mzihv5D+oM2TdomEQOM0D2MMQWeeijghrk
E9wQyivccvIvRQf1I4ortaDobk1EEU/b33ifePThyiRienYIuFnm4eBwOJE9yauV
clAoSfXcOvj/iyEX3uM3Z2NaT3oLvaVvsVLud8JEXbHx3Yp1ag9KHY3jdzfv3/6n
RzuzD7M8igYbRd/wtWoLxz/B4SgWp235SEBO593zBb64ybXM+VFMmkkFQ0ci3ENQ
QitrM8FPffwhe0kljQBAK307jGtXqSMshmNcBn0xZIF33Rh3cMtG/x+Je0NeuuzQ
pAlq+tO74M37pW1JC5jwnwHFcaV6
-----END CERTIFICATE-----
EOL
controlcrt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFQDCCAygCEQDYQzd2PzO7gaCa+Nx7PJAwMA0GCSqGSIb3DQEBCwUAMEkxLTAr
BgNVBAsTJDM2YmYyZDUzLTg4M2YtNGU3MS05Y2ViLTIyZjE1ZDhhOTQ2NTEYMBYG
A1UEAxMPdHV0b3JpYWxjbHVzdGVyMCIYDzIwMTUwNTI4MDkzODMzWhgPMjAzNTA1
MjMwOTM4MzNaMEkxLTArBgNVBAsTJDM2YmYyZDUzLTg4M2YtNGU3MS05Y2ViLTIy
ZjE1ZDhhOTQ2NTEYMBYGA1UEAxMPY29udHJvbC1zZXJ2aWNlMIICIjANBgkqhkiG
9w0BAQEFAAOCAg8AMIICCgKCAgEAxXrDY7wQ/uxWb+irwoyi+4gfAUvw4ZqEBNUO
oL6r8RNCoRZRh5F3IVUKFvPsrH1mPo83EiZXJMapOaV3d3UkolIogzicvpNhpos+
k9QNUv6gify/0xlAV/QQvj8oWWN7Fl9u4NfkC4HWllp3Twu+OlpQBlBYidNZ9BE8
12KTCjighQYxXfBlELFYmlrmPOlfiWIwTyFbGEx8O8wvmQ5pG4681F3csoLMuiXH
dJH/kFmY8WJ+DvEF+USFbxqD/b9ua28vRR1CMoEy2L2ej7xcrEqIYV9sutboOeKT
c6cNhDjuLKQpcHADlD9t+7Gi6hF+Cn3jXPPKoyc/LurTONek1mYDTcj/BJM/V5D8
gGnde5PZnoE0JQ/5QrS/AG3Qpzq6PUvDKJi00mOAHOFsACA5+odcUwRMOe0c4CWd
RDuRXtDNgNzeFS3Yq4bBXyo5xP4mTC+5Tu766eQ+8+LM8rZQI4l5bt/EBjnb1M7K
jfhwSPoroJZ48ixlQID/zveCgJmJ3ErfK320W4d4M4eCYcYfWh+n2qIckLjZWauP
dX0w170BpC8ipGqgeTW7m+AE1kjsVTe7nPACuXeYlHrca1a0LxWt5LuG+YV/eZAA
xv5/+P7Z0RC03M1ldvBd0ySD4GBtx+bwQuki+HQbGf/qpV52xITBM3TN4HZuc57m
oiYdH2kCAwEAAaMkMCIwIAYDVR0RBBkwF4IPY29udHJvbC1zZXJ2aWNlhwSsEP/6
MA0GCSqGSIb3DQEBCwUAA4ICAQAzW/OleWpQqMm1F05Rmx4wh1TWIG1JLHQKyHZH
1nBSSEqGP++aiKoAp+WvaIjEFHf3kf32U176YtGZyBKlwoUA90fqq/h86xNYuRW+
pr5xIsG+D2QHSAmPLQtGUfnoZP8StDt/YF6qdQ/FLGDzeo1tMGjo1+AYoqsK2U5m
0WDoeLP4e1UjxJl6TZ4AU4Xl3H5sBrEGqBWbgd6dkfPNzOnADMS+v2eSgU7JY9RZ
MsRVFrzW94LSSnNx9EybM2GkSsLrpVJvq780sa2rTm6rmnrQI6SATAvpxoiQ/yb0
SRC1ksFvJwM0YE8QI/OGFJ1ud5rk2T64/qDx62g7Ae0SGhN060TQj/PgT/mYF7f5
h8ETIw8cZiJXrmbIs1cfmjozTT3pmihdp/5p/VpNm5vfLgWpmQfOV7wgVcGeZ/vH
0SqYrAyBwpUxXNmrp0/4bzmxCi11A80qPyEvN5YlOgsscV0pLFzMbEgsdIg5j92P
67y0pwnveSY8taWuApWDfryZosNxJ2u1VVYv8ogWpJt18HN0SIXFX4YuahyIYSJU
8WBKYjG78V0/2XKbHdAIPTFqUm79IR8kk6LOrNVO63E917XWw/xweb1p9d5b8mm3
qitlicVbF+3uOK9ouGGWhotJsOEgYgmMgfNF+9ay/QT9UX4jdq+O1qsFVSk9nl3O
nkbEZA==
-----END CERTIFICATE-----
EOL
controlkey = <<EOL
-----BEGIN PRIVATE KEY-----
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
6k8EuCc+6Lkkm4osKe+kXPkqpr6WzT4=
-----END PRIVATE KEY-----
EOL
node1crt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFMzCCAxsCED7nwVZzdAfwWOKa2a5t5A0wDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTQxMDZaGA8yMDM1MDUy
MzA5NDEwNlowYzEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MTIwMAYDVQQDEylub2RlLWNhYjBiMGU1LTg0ZDktNDJmNy05MjI4
LThkMmNiMTRmYzUwZTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBANDd
jrYFN752whKwiXv+B7MnnItkOXR8O2EMBkjgUEZ+nmGokMh2T6t5ZJsiGz4gx8gm
PCXocK3Cj1LkkIBY/IvigIjuNxF2N+2fnfHklpgJzAu292aqyT7QJxxbThaMz988
R4gnNU14q8XEM8dP/CGi0sztspoY8CEA0c8gxeWzbJUdr+A6t54pofO0jc6YldTm
OACt09JfAAnAjjLuzvqGz/eCMBvX0tl5KTxv1qkNSvUa6+lxbn5FaGLY7200eVlh
1uNSmA3cjZjnYnbZFGTQWb2l5aFnjDIo4P+UyeG0LXQDf/zT4qHgRz1jyPtfC6vP
vYPvMQNamrWttfa+imQHDb76Qf3VbP2K5PVAGpWrjgu0GeWkmW4FeULeaNDwFN+Z
0n1tYKfG/xdW0RvbtQk0vfHXx567qc+4W5e88/Un5hrmrFD7soeUfj8edmBqUZnx
2LMKCdiNVyagsrjHe9nmpGVfiCHXJJgHzzJKjp+1wHzMlvDWR9ubLtuhIsC5BkvZ
XMO0lC4i1yjN63Lop9MkGzrfuoOOzxiDRH2ZmvgTGMfMKY+pQsLs/vEOm3tx7EIO
IKo3Jqq97+bJO5oIz/3fIrUJyiIxwPxeUSKT8lhryzqeIJaS1HgYul8X1WK+ZL41
lbRSf9Px0sI/aAQ5qMf3fmluWoR+yNPTp67qUFONAgMBAAEwDQYJKoZIhvcNAQEL
BQADggIBAC5iCmxPBTpLwtKsyl8NJEBiqNtfs0IYhaawAAUctSaHlDG7c7ytpQiJ
atlDQ2Ae5JZ+1eLqGp7td3X8oFUdo5ceutNwAExTxjIYg5BbMbebtBN1XdL4kQ0o
ba6JViZaPt/ogiWuhEZv2dxwTsj5/eB//tbNAs5lW3HXIVoGaDBY+8/79/Z0qEou
9i00UV/h0EHr59j7M06+Spqz5rDUSOXAQ67XqOSHpt22/t7hD8smWuKw1S+nlXee
thvg0W4CJaZ6RD53pbdG7/09nfr2GDJuSUGbRN1k8WDRItPTymhiVgUknRAoic5Q
ggK3Zba0BJ0s3OCKNdr3TfnBXdtzB/l8/QxiXCzP7g7ivBE113YqJNYMyk4FNu6z
ws39mtgODlIBurEyNKtG5UMJ6N4O25chVV8lcQo8T9efGDlsz5LpSkAXJbey4+Ut
a0KXPpvZqCy93AAHbY0yzJ6t0GBxuHDBZdOSLxj3NjRsqS3DIagI6BXGp+R3fdZD
AKe0+E0xMs3g8pjz1ateB/7prcS55hDi0kSHLjNzvCBrl2wybGdInRJrAI2PGDU8
LFzvoLA7UFLDZ0ZIstjKGpxmmiEtmwHBliqMMsYYET9X5qfg/UejKBWzxB0Z5RNT
/LDaVwtf+Kcv+G422IzXp97ljTt8AMvmgxv4LeRMUnhcPYbj6YaC
-----END CERTIFICATE-----
EOL
node1key = <<EOL
-----BEGIN PRIVATE KEY-----
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
syj5TJTedF79eCT30fon3l/Q7cOWNg==
-----END PRIVATE KEY-----
EOL
node2crt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFMzCCAxsCEEEMiPpLFTuJSKVlsFj6D6kwDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTQxMzNaGA8yMDM1MDUy
MzA5NDEzM1owYzEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MTIwMAYDVQQDEylub2RlLWI5OThiYTVlLWFlNDUtNGU0Zi1hOWRk
LTUxMWE2ZDlhODg2NTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAOGS
E4fQpInupjZOOCvtfYHa4ye3+LaJgYOkZXHoEG78231aj1QO5K3dueYS0pNU0oYd
zekKmY81BLapq5IfhRGxVVMV9D4OGDcgcQ/OY/IfmROGT9UrFet2kReBftARqbTL
Jh5/PocJ+Q+LleugvpXPHA2DW2KK+tF9t/056D/Yz4V2Nf5W7c8yVGxqUKGMvKfI
L9IB9/gZDK2n2OYPu2wHO4JdJjJatXaf9viEJ1Z/lQEDaZhZ9eQ0BRe6cjTjQCGU
QxcsEQk0sAozCT+W54x+XuCDBVf29lxKuAMNyvzGtwh80FuW+2FhUUnNOZPWm6RB
8eWuKRistjH5t7eENjpMjltMl8iGWO6iSY+TozTqGmKCzArty2dc4Gd6cytIdamV
OWFYXH78jQI4qfkbDW+IoCmD+fZDU9/RQyOim61ZhykbDLkMlnvfs4owuUPtdL4L
LC2+luKQHygaum0xvkK+HHynXt2UtKGmbIklaqpMx1EzS8H97zEro2v9aZUUVef8
O7GXpA4xZ/8GovqNFQfdkJZ781bmUOScZJO19xtac6T5iEpsD3yO8SKatPOoQbYB
3A+glUIFJNcFpwPNjAUGMEyuoC8UAtgiAm9ZweSPGI/Dh1nDBopSXGpubXOKS/OM
28mWGqn9SNMZ1wAm36SBodjL8ouqXEn5K3iB6GVXAgMBAAEwDQYJKoZIhvcNAQEL
BQADggIBAIY2V0YK7OsWVhV2PVnJciasy+Y9tMD4l67gGBSMKdriDqRpGBEkir12
0U3uGxO0TGJDe2jisa6UTnmDPr6AKgBOcBoZWySQHfVIrORYBCoqj3xjZcNpZ6Qi
6MmXC7pWPo8awppwp0xR/ID0tiKPG1grkpYn6cZirlgzzvYMZOdMpH56Py/UdCHs
jeOIU9lijLc5WnzSEkGbYwBry0scZsxHTclKfmytS7KwqZVrp9gedasEL61xvWuh
0t1KotPHapZK/s5xxrkgRNIUDsb27pZd+pktcJfhbXJMQGGcLhydnHocvsZNnEg5
thalgfzNrjgInqKcVHhGfOrUfdlfQhItORXACm/5bIBCDj6sM/KDyXXcgMe0QHIH
kgQ053uITcMKDWS/kmm4q7IPYouEmipaIkTpUR7vtqp36NnYut7ZOf6UPDR8jApa
j6iLIWufj/8DwSbcxiD2wwF+WyQuk8FwL1vHWKocDWXDrtlCSm4zjPnyJ2bOhy0A
lbHQ0zMh6T16O1TMuWYqfnl0weN2dmR5CLPSfVvgpiTWM4vuIQFB4UuAYyp5fcWc
MwguVROyfxeISjO+50jQQuA2SQA013w30qkbecYgow/JKSsvAHean6uyd1f2wzSm
kuWaUXXsLwFfCmVaLG9Z6qmJh+JPnKene4n58z3LzHVn5mSpU85k
-----END CERTIFICATE-----
EOL
node2key = <<EOL
-----BEGIN PRIVATE KEY-----
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
SXDCi2vXKqml9hW3ZpCHK61eSMg+OlM=
-----END PRIVATE KEY-----
EOL
$bootstrapnode1 = <<EOL
echo "#{clustercrt}" >> /etc/flocker/cluster.crt
echo "#{controlcrt}" >> /etc/flocker/control-service.crt
echo "#{controlkey}" >> /etc/flocker/control-service.key
echo "#{node1crt}" >> /etc/flocker/node.crt
echo "#{node1key}" >> /etc/flocker/node.key
echo "control-service: {hostname: 172.16.255.250, port: 4524}
dataset: {backend: zfs}
version: 1" >> /etc/flocker/agent.yml
systemctl enable flocker-control
systemctl start flocker-control
systemctl enable flocker-dataset-agent
systemctl start flocker-dataset-agent
systemctl enable flocker-container-agent
systemctl start flocker-container-agent
EOL

$bootstrapnode2 = <<EOL
echo "#{clustercrt}" >> /etc/flocker/cluster.crt
echo "#{node2crt}" >> /etc/flocker/node.crt
echo "#{node2key}" >> /etc/flocker/node.key
echo "control-service: {hostname: 172.16.255.250, port: 4524}
dataset: {backend: zfs}
version: 1" >> /etc/flocker/agent.yml
systemctl enable flocker-dataset-agent
systemctl start flocker-dataset-agent
systemctl enable flocker-container-agent
systemctl start flocker-container-agent
EOL

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = "clusterhq/flocker-tutorial"
  config.vm.box_version = "= |latest-installable|"

  if Vagrant.has_plugin?("vagrant-cachier")
    config.cache.scope = :box
  end

  config.vm.define "node1" do |node1|
    node1.vm.network :private_network, :ip => "172.16.255.250"
    node1.vm.hostname = "node1"
    node1.vm.provision "shell", inline: $bootstrapnode1, privileged: true
  end

  config.vm.define "node2" do |node2|
    node2.vm.network :private_network, :ip => "172.16.255.251"
    node2.vm.hostname = "node2"
    node2.vm.provision "shell", inline: $bootstrapnode2, privileged: true
  end

end
