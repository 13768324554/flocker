# -*- mode: ruby -*-
# vi: set ft=ruby sw=2 :

# This requires Vagrant 1.6.2 or newer (earlier versions can't reliably
# configure the Fedora 20 network stack).
Vagrant.require_version ">= 1.6.2"

# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!
VAGRANTFILE_API_VERSION = "2"

ENV['VAGRANT_DEFAULT_PROVIDER'] = 'virtualbox'

clustercrt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFgTCCA2kCEAPWNnTNQeaqbcFA5biyam0wDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTM3MDRaGA8yMDM1MDUy
MzA5MzcwNFowSTEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MRgwFgYDVQQDEw90dXRvcmlhbGNsdXN0ZXIwggIiMA0GCSqGSIb3
DQEBAQUAA4ICDwAwggIKAoICAQCzTdz15l1RCugMhugRexAs+EfLWT4FFjFw+YGs
YXqPali7YMSD7VGNNx5rAH/xtpfWE4WjRo5bc5dVzTdLgOaJOfnNPcddGNjrRo4y
MidFXFqyS4VHpOnKjuAMcTQhO19S5kxuwUTjaM1J2a8i7oTcgzUkGVWwyHgoJC9K
gy7f9SrmdELOt6voU6zgQ2CQybMCy3Pp6xO4w5tmFHsSjpR3OP2+qa14IoqiCbQC
MRT3fyayolLNsMEtk1Jq/Qyu9KkoQQL3PgpgMNU+saAC4Wuan4UZxeR6hR96kBKP
dE7NJ7G8lbRXtluBaCDF7zaaJPN+EsYOkvRtEZQjWAewaR+I1lpthXEdqb1fzfMk
hMKkA6BJOyc/pBFQTlKYGrHvCLkXkY3zLs7leoWlIKsrD7SnMaKoUg8a3XZfS94A
+Kxt9veiD+ZaSzhhDHkqX9GcrPNPzgHuEyhK6fSs0HZyKIjYOVWHn+jcG+F822zU
iRp+AOaflQNFrPo4NgY1Gm0Ma96A+SGd71mwLgEFgB9l7PDmL66NSoXGm+iyTiOt
GRIB6/Tvco5KwPCg5L8z+vSHMZkZBLxfunLqnvjwA5jbc6uMdyU3NRg4SY2oiX+H
BsiwkkoE0dOHE5co26kL5DMXBcKli6dbqnJ0sbuNCE8jwjB3xThnPKSlI7b77Wtz
a81eNQIDAQABo2YwZDASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
BjAdBgNVHQ4EFgQUFJQSKyU/JrtJQUn9YwwpPLe+ZsEwHwYDVR0jBBgwFoAUFJQS
KyU/JrtJQUn9YwwpPLe+ZsEwDQYJKoZIhvcNAQELBQADggIBAFrKuPYq6AmQ0qgb
N/Jo1TsH4sdCEuUFGJ5dI0lTk+7zf7voinlOwYLSk5P6AKZ2Xm1MdkChp190y/Qz
BAAkk5DydKK1gRQp/96wSegx4pcenaTLYWMxjbUNPrQpJQhHHEJWVRnQcVPig/at
8WoT7ID9VpTYolJ4dWoSg2R/QWslBteNR0rztOYcl9dj1ZJ4DtZlUUz1eQ4hcC6j
46OrmpedkG/DB8HT7a2d14Mbq5aPSVsIO79baC8+O4H0gaT0CRlc5exCDXxa+odK
IrAmG9ryoD+8wFEiuOnpIxzJbb943IVDKgaTAvEves6ka8xJvpXPHkgw0e4cmrlY
pIirtcP3UY2ZKyTp2Zvp64Q6KGBRw1Mzihv5D+oM2TdomEQOM0D2MMQWeeijghrk
E9wQyivccvIvRQf1I4ortaDobk1EEU/b33ifePThyiRienYIuFnm4eBwOJE9yauV
clAoSfXcOvj/iyEX3uM3Z2NaT3oLvaVvsVLud8JEXbHx3Yp1ag9KHY3jdzfv3/6n
RzuzD7M8igYbRd/wtWoLxz/B4SgWp235SEBO593zBb64ybXM+VFMmkkFQ0ci3ENQ
QitrM8FPffwhe0kljQBAK307jGtXqSMshmNcBn0xZIF33Rh3cMtG/x+Je0NeuuzQ
pAlq+tO74M37pW1JC5jwnwHFcaV6
-----END CERTIFICATE-----
EOL
controlcrt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFQDCCAygCEQCa8ytdRDzniQaa+5dIy1ClMA0GCSqGSIb3DQEBCwUAMEkxLTAr
BgNVBAsTJDM2YmYyZDUzLTg4M2YtNGU3MS05Y2ViLTIyZjE1ZDhhOTQ2NTEYMBYG
A1UEAxMPdHV0b3JpYWxjbHVzdGVyMCIYDzIwMTUwNTI4MTEwMjI5WhgPMjAzNTA1
MjMxMTAyMjlaMEkxLTArBgNVBAsTJDM2YmYyZDUzLTg4M2YtNGU3MS05Y2ViLTIy
ZjE1ZDhhOTQ2NTEYMBYGA1UEAxMPY29udHJvbC1zZXJ2aWNlMIICIjANBgkqhkiG
9w0BAQEFAAOCAg8AMIICCgKCAgEAxP5ol6RTxH/bijqklAslqYt0EKogpqUtMhK/
ObOtJxqAC8iCwsTfg+d9yC5SckYF+1vZAimN/TWVli7GrU+Y9VanIwmqkrmKBICU
a2+7mNljKLdwSqwCZBILhbn8gAFONMMwpc0s9jCTIEa802ykNH8rxYqreC837vIk
H6bh2BPRmSxNyfsAiuPUMpa8riEEAAadSHbvSZkXon71lKLGRPuxCTKxwyQyk3Lj
KVP9IgMGaN2LVP92Z/iWaWBnMptY1l7sfFtsvtoSetH2vsl8vkafFVGkawKvdYhg
eXsBMHw1EGIZgmLzCfPGlza3oG/19xzlNXueiFExM3twDpxJUOmQ1NBjTBVcfOUs
NoHTkOUlZEXkYhPuYmHSLfZW0acfptpZLwCFLz9bD41/0qQb82V/pOJPnr8wBq0m
gnCaxdkBID5Qtx7pPpV+v5RFBuEaG7td7qxVhlHr3wnSjbTtQhsVnzW/3U6pKszQ
tBhrJxMB1Osn1quCZUJVM82vA31jDsrcjEM4pCoiTA/9mUKpcHZ/DMlMFLqPYq6/
Ud0pnr4oruAsLru6oJ7J72Frazzcgb3OM0rmsOd6VcTCWH6VE6KmvQAZOsqwfqfL
2GHNVCO4AWbgF/5dI0GNLVy76Nb7u6wmjx2z3o1vcLJv36vOlZcUaeH3Iq6evHz7
8LepdH8CAwEAAaMkMCIwIAYDVR0RBBkwF4IPY29udHJvbC1zZXJ2aWNlhwSsEP/w
MA0GCSqGSIb3DQEBCwUAA4ICAQAdAr4nw2n6t513EQkix6IHIoA5+34qmliubJv8
gMNNT24pRSj3nKEmp0Ay/hCYotyxlwoi29lDjrsDWJ+6KFTshsr+kIeK1I8hsMHD
3X0ZP7F85Kz3jt30odY0r/gzTAyhCHHZPrdk3AFXdNQ2J0qGSDx2zfdIWWAc14sK
uQeQ8Gn1YdXnY0R1Ox7Sdq4AuDkMQLu4R/QZYIYd08+nULwXUHQ1d5LpyE1cktLA
5kWaN7GsI237S73IDQCIY2RE3+ckLpwWLXO/xYT+VcfaRH0NJZR3VHc1bqHXlXwy
8s2R6h6oUPewt2tPFdW1e87/HOwX3YZLmvsvvwVQWX6W5ZWp5fgsM83CJVcwSTh6
H3b2jyP/O/ryQInmq68CHoNMy03k2yJVAXR27o1dtoiQoIDHj8zrHy34RBxs3nLk
Tq59YE6fVdmINiVTdFVDrIHn6X236psAHAPWw4ZJdDgq0BvaLU7SNh73DqQcoaiQ
SgnhcQWYH+b94hV7sZrvtcinaoFcUBpSmMJiJ07ArdQxPXXorXGH8QG1FdYVMDp8
+k+fFe+ITo1SgS523A8NhWW4tJ8oXheCQwrW8oeN3SCEVutEiyJLUkjkg47GDRHR
Rzb8625NSotV30OnNzhKW9hIlWUSqi08gRjr6bF7OhUO3c7Jgz3iffkErtZNK2IM
8d+LsA==
-----END CERTIFICATE-----
EOL
controlkey = <<EOL
-----BEGIN PRIVATE KEY-----
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
PECr7o7dgtQz98X50BHWAWUvi/oKdzI=
-----END PRIVATE KEY-----
EOL
node1crt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFMzCCAxsCED7nwVZzdAfwWOKa2a5t5A0wDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTQxMDZaGA8yMDM1MDUy
MzA5NDEwNlowYzEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MTIwMAYDVQQDEylub2RlLWNhYjBiMGU1LTg0ZDktNDJmNy05MjI4
LThkMmNiMTRmYzUwZTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBANDd
jrYFN752whKwiXv+B7MnnItkOXR8O2EMBkjgUEZ+nmGokMh2T6t5ZJsiGz4gx8gm
PCXocK3Cj1LkkIBY/IvigIjuNxF2N+2fnfHklpgJzAu292aqyT7QJxxbThaMz988
R4gnNU14q8XEM8dP/CGi0sztspoY8CEA0c8gxeWzbJUdr+A6t54pofO0jc6YldTm
OACt09JfAAnAjjLuzvqGz/eCMBvX0tl5KTxv1qkNSvUa6+lxbn5FaGLY7200eVlh
1uNSmA3cjZjnYnbZFGTQWb2l5aFnjDIo4P+UyeG0LXQDf/zT4qHgRz1jyPtfC6vP
vYPvMQNamrWttfa+imQHDb76Qf3VbP2K5PVAGpWrjgu0GeWkmW4FeULeaNDwFN+Z
0n1tYKfG/xdW0RvbtQk0vfHXx567qc+4W5e88/Un5hrmrFD7soeUfj8edmBqUZnx
2LMKCdiNVyagsrjHe9nmpGVfiCHXJJgHzzJKjp+1wHzMlvDWR9ubLtuhIsC5BkvZ
XMO0lC4i1yjN63Lop9MkGzrfuoOOzxiDRH2ZmvgTGMfMKY+pQsLs/vEOm3tx7EIO
IKo3Jqq97+bJO5oIz/3fIrUJyiIxwPxeUSKT8lhryzqeIJaS1HgYul8X1WK+ZL41
lbRSf9Px0sI/aAQ5qMf3fmluWoR+yNPTp67qUFONAgMBAAEwDQYJKoZIhvcNAQEL
BQADggIBAC5iCmxPBTpLwtKsyl8NJEBiqNtfs0IYhaawAAUctSaHlDG7c7ytpQiJ
atlDQ2Ae5JZ+1eLqGp7td3X8oFUdo5ceutNwAExTxjIYg5BbMbebtBN1XdL4kQ0o
ba6JViZaPt/ogiWuhEZv2dxwTsj5/eB//tbNAs5lW3HXIVoGaDBY+8/79/Z0qEou
9i00UV/h0EHr59j7M06+Spqz5rDUSOXAQ67XqOSHpt22/t7hD8smWuKw1S+nlXee
thvg0W4CJaZ6RD53pbdG7/09nfr2GDJuSUGbRN1k8WDRItPTymhiVgUknRAoic5Q
ggK3Zba0BJ0s3OCKNdr3TfnBXdtzB/l8/QxiXCzP7g7ivBE113YqJNYMyk4FNu6z
ws39mtgODlIBurEyNKtG5UMJ6N4O25chVV8lcQo8T9efGDlsz5LpSkAXJbey4+Ut
a0KXPpvZqCy93AAHbY0yzJ6t0GBxuHDBZdOSLxj3NjRsqS3DIagI6BXGp+R3fdZD
AKe0+E0xMs3g8pjz1ateB/7prcS55hDi0kSHLjNzvCBrl2wybGdInRJrAI2PGDU8
LFzvoLA7UFLDZ0ZIstjKGpxmmiEtmwHBliqMMsYYET9X5qfg/UejKBWzxB0Z5RNT
/LDaVwtf+Kcv+G422IzXp97ljTt8AMvmgxv4LeRMUnhcPYbj6YaC
-----END CERTIFICATE-----
EOL
node1key = <<EOL
-----BEGIN PRIVATE KEY-----
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
syj5TJTedF79eCT30fon3l/Q7cOWNg==
-----END PRIVATE KEY-----
EOL
node2crt = <<EOL
-----BEGIN CERTIFICATE-----
MIIFMzCCAxsCEEEMiPpLFTuJSKVlsFj6D6kwDQYJKoZIhvcNAQELBQAwSTEtMCsG
A1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJmMTVkOGE5NDY1MRgwFgYD
VQQDEw90dXRvcmlhbGNsdXN0ZXIwIhgPMjAxNTA1MjgwOTQxMzNaGA8yMDM1MDUy
MzA5NDEzM1owYzEtMCsGA1UECxMkMzZiZjJkNTMtODgzZi00ZTcxLTljZWItMjJm
MTVkOGE5NDY1MTIwMAYDVQQDEylub2RlLWI5OThiYTVlLWFlNDUtNGU0Zi1hOWRk
LTUxMWE2ZDlhODg2NTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAOGS
E4fQpInupjZOOCvtfYHa4ye3+LaJgYOkZXHoEG78231aj1QO5K3dueYS0pNU0oYd
zekKmY81BLapq5IfhRGxVVMV9D4OGDcgcQ/OY/IfmROGT9UrFet2kReBftARqbTL
Jh5/PocJ+Q+LleugvpXPHA2DW2KK+tF9t/056D/Yz4V2Nf5W7c8yVGxqUKGMvKfI
L9IB9/gZDK2n2OYPu2wHO4JdJjJatXaf9viEJ1Z/lQEDaZhZ9eQ0BRe6cjTjQCGU
QxcsEQk0sAozCT+W54x+XuCDBVf29lxKuAMNyvzGtwh80FuW+2FhUUnNOZPWm6RB
8eWuKRistjH5t7eENjpMjltMl8iGWO6iSY+TozTqGmKCzArty2dc4Gd6cytIdamV
OWFYXH78jQI4qfkbDW+IoCmD+fZDU9/RQyOim61ZhykbDLkMlnvfs4owuUPtdL4L
LC2+luKQHygaum0xvkK+HHynXt2UtKGmbIklaqpMx1EzS8H97zEro2v9aZUUVef8
O7GXpA4xZ/8GovqNFQfdkJZ781bmUOScZJO19xtac6T5iEpsD3yO8SKatPOoQbYB
3A+glUIFJNcFpwPNjAUGMEyuoC8UAtgiAm9ZweSPGI/Dh1nDBopSXGpubXOKS/OM
28mWGqn9SNMZ1wAm36SBodjL8ouqXEn5K3iB6GVXAgMBAAEwDQYJKoZIhvcNAQEL
BQADggIBAIY2V0YK7OsWVhV2PVnJciasy+Y9tMD4l67gGBSMKdriDqRpGBEkir12
0U3uGxO0TGJDe2jisa6UTnmDPr6AKgBOcBoZWySQHfVIrORYBCoqj3xjZcNpZ6Qi
6MmXC7pWPo8awppwp0xR/ID0tiKPG1grkpYn6cZirlgzzvYMZOdMpH56Py/UdCHs
jeOIU9lijLc5WnzSEkGbYwBry0scZsxHTclKfmytS7KwqZVrp9gedasEL61xvWuh
0t1KotPHapZK/s5xxrkgRNIUDsb27pZd+pktcJfhbXJMQGGcLhydnHocvsZNnEg5
thalgfzNrjgInqKcVHhGfOrUfdlfQhItORXACm/5bIBCDj6sM/KDyXXcgMe0QHIH
kgQ053uITcMKDWS/kmm4q7IPYouEmipaIkTpUR7vtqp36NnYut7ZOf6UPDR8jApa
j6iLIWufj/8DwSbcxiD2wwF+WyQuk8FwL1vHWKocDWXDrtlCSm4zjPnyJ2bOhy0A
lbHQ0zMh6T16O1TMuWYqfnl0weN2dmR5CLPSfVvgpiTWM4vuIQFB4UuAYyp5fcWc
MwguVROyfxeISjO+50jQQuA2SQA013w30qkbecYgow/JKSsvAHean6uyd1f2wzSm
kuWaUXXsLwFfCmVaLG9Z6qmJh+JPnKene4n58z3LzHVn5mSpU85k
-----END CERTIFICATE-----
EOL
node2key = <<EOL
-----BEGIN PRIVATE KEY-----
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
SXDCi2vXKqml9hW3ZpCHK61eSMg+OlM=
-----END PRIVATE KEY-----
EOL
$bootstrapnode1 = <<EOL
echo "#{clustercrt}" >> /etc/flocker/cluster.crt
echo "#{controlcrt}" >> /etc/flocker/control-service.crt
echo "#{controlkey}" >> /etc/flocker/control-service.key
echo "#{node1crt}" >> /etc/flocker/node.crt
echo "#{node1key}" >> /etc/flocker/node.key
echo "control-service: {hostname: 172.16.255.240, port: 4524}
dataset: {backend: zfs}
version: 1" >> /etc/flocker/agent.yml
systemctl enable flocker-control
systemctl start flocker-control
systemctl enable flocker-dataset-agent
systemctl start flocker-dataset-agent
systemctl enable flocker-container-agent
systemctl start flocker-container-agent
EOL

$bootstrapnode2 = <<EOL
echo "#{clustercrt}" >> /etc/flocker/cluster.crt
echo "#{node2crt}" >> /etc/flocker/node.crt
echo "#{node2key}" >> /etc/flocker/node.key
echo "control-service: {hostname: 172.16.255.240, port: 4524}
dataset: {backend: zfs}
version: 1" >> /etc/flocker/agent.yml
systemctl enable flocker-dataset-agent
systemctl start flocker-dataset-agent
systemctl enable flocker-container-agent
systemctl start flocker-container-agent
EOL

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = "clusterhq/flocker-tutorial"

  begin
    config.vm.box_version = "= " + ENV.fetch('FLOCKER_BOX_VERSION')
  rescue KeyError
  end

  if Vagrant.has_plugin?("vagrant-cachier")
    config.cache.scope = :box
  end

  config.vm.define "node1" do |node1|
    node1.vm.network :private_network, :ip => "172.16.255.240"
    node1.vm.hostname = "node1"
    node1.vm.provision "shell", inline: $bootstrapnode1, privileged: true    
  end

  config.vm.define "node2" do |node2|
    node2.vm.network :private_network, :ip => "172.16.255.241"
    node2.vm.hostname = "node2"
    node2.vm.provision "shell", inline: $bootstrapnode2, privileged: true    
  end

end
